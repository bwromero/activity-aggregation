<div class="container">
  <mat-card class="aggregation-card">
    <mat-card-header>
      <mat-card-subtitle>{{ UI_CONFIG.messages.groupByLabel }}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <app-activity-filter
        [isProjectSelected]="service.isFieldSelected(ACTIVITY_FIELDS.PROJECT)()"
        [isEmployeeSelected]="service.isFieldSelected(ACTIVITY_FIELDS.EMPLOYEE)()"
        [isDateSelected]="service.isFieldSelected(ACTIVITY_FIELDS.DATE)()"
        (fieldToggled)="service.toggleField($event)"
      />

      @if (service.loading()) {
        <div class="loading">
          <mat-spinner [diameter]="UI_CONFIG.spinner.diameter"></mat-spinner>
        </div>
      }

      @if (service.error()) {
        <div class="error">{{ service.error() }}</div>
      }

      @if (service.hasData()) {
        <app-activity-table
          [data]="service.data()"
          [displayedColumns]="service.displayedColumns()"
        />
      }

      @if (service.showNoData()) {
        <div class="no-data">{{ UI_CONFIG.messages.noData }}</div>
      }
    </mat-card-content>
  </mat-card>
</div>